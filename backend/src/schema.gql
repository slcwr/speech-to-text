# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

enum AnalysisStatus {
  COMPLETED
  FAILED
  PENDING
  PROCESSING
}

enum AnswerStatus {
  COMPLETED
  FAILED
  IN_PROGRESS
}

type AudioTranscriptionSubscriptionResponse {
  questionId: String!
  sessionId: String!
  timestamp: String!
  transcription: String!
  userId: String!
}

type AuthResponse {
  token: String!
  user: User!
}

input CompleteAnswerInput {
  """Question ID"""
  questionId: String!

  """Session ID"""
  sessionId: String!
}

type CompleteAnswerResponse {
  isInterviewComplete: Boolean!
  message: String!
  nextQuestion: InterviewQuestionResponse
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type InterviewAnswer {
  answer_data: String!
  answer_status: AnswerStatus!
  completed_at: DateTime
  created_at: DateTime!
  id: ID!
  question_id: String!
  started_at: DateTime!
  updated_at: DateTime!
}

type InterviewQuestion {
  answer: InterviewAnswer
  created_at: DateTime!
  id: ID!
  question_data: String!
  question_order: Float!
  question_type: QuestionType!
  sessionId: String!
}

type InterviewQuestionResponse {
  createdAt: DateTime!
  id: ID!
  metadata: JSON
  orderNumber: Int!
  question: String!
  sessionId: ID!
  updatedAt: DateTime!
}

type InterviewSession {
  completedAt: DateTime
  createdAt: DateTime!
  id: ID!
  questions: [InterviewQuestion!]!
  sessionStatus: SessionStatus!
  skillSheet: SkillSheet!
  skillSheetId: String!
  startedAt: DateTime
  updatedAt: DateTime!
  userId: String!
}

"""
The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSON

input LoginInput {
  email: String!
  password: String!
}

type Mutation {
  completeAnswer(input: CompleteAnswerInput!): CompleteAnswerResponse!
  login(input: LoginInput!): AuthResponse!
  register(input: RegisterInput!): AuthResponse!
  startInterview(input: StartInterviewInput!): StartInterviewResponse!
}

type Query {
  getLatestSession: InterviewSession
  getMySkillSheets: [SkillSheet!]!
  getSkillSheet(id: String!): SkillSheet
  interviewSession(sessionId: String!): InterviewSession!
  me: User!
  user(id: String!): User
}

enum QuestionType {
  MOTIVATION
  REVERSE
  SELF_INTRODUCTION
  TECHNICAL
}

input RegisterInput {
  email: String!
  name: String
  password: String!
}

enum SessionStatus {
  CANCELLED
  COMPLETED
  IN_PROGRESS
  PENDING
}

type SkillSheet {
  analysisStatus: AnalysisStatus!
  createdAt: DateTime!
  fileName: String!
  filePath: String!
  id: ID!
  skillData: String!
  updatedAt: DateTime!
  userId: String!
}

input StartInterviewInput {
  sessionId: ID!
}

type StartInterviewResponse {
  allQuestions: [InterviewQuestionResponse!]!
  currentQuestion: InterviewQuestionResponse!
  sessionId: ID!
  startedAt: DateTime!
  status: String!
}

type Subscription {
  """リアルタイム音声転写結果を受信する"""
  audioTranscription(sessionId: String!): AudioTranscriptionSubscriptionResponse!
}

type User {
  createdAt: DateTime!
  email: String!
  id: ID!
  isActive: Boolean!
  lastLoginAt: DateTime
  name: String
  role: String!
  updatedAt: DateTime!
}